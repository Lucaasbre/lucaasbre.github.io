<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Overwatch 2 - Support Stats</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.1"></script>
</head>

<body>
    <header>
        <h1>OVERWATCH 2 ‚Äî SUPPORT STATS</h1>
    </header>

    <main>
        <div class="top-menu">
            <a href="#seasons" class="menu-btn active" data-section="seasons">Temporadas</a>
            <a href="#graphics" class="menu-btn" data-section="graphics">Gr√°ficos</a>
            <a href="#stats" class="menu-btn" data-section="stats">Estad√≠sticas</a>
            <a href="#comparison" class="menu-btn" data-section="comparison">Comparaci√≥n</a>
            <a href="#summary" class="menu-btn" data-section="summary">Resumen</a>
            <a href="#help" class="menu-btn" data-section="help">Ayuda</a>
        </div>

        <div id="popupSave" class="popup">
            <div id="popupBox" class="popupBox">
                <h3>¬øGuardar datos?</h3>
                <div>
                    <p>¬øQuer√©s que la web recuerde tus estad√≠sticas?</p>
                    <p class="small">Se guardar√°n en tu navegador (LocalStorage).</p>
                </div>
                <div>
                    <button class="btn-secondary text-grey" onclick="denyStorage()">No, gracias</button>
                    <button class="btn-primary text-black" onclick="acceptStorage()">S√≠, guardar</button>
                </div>
            </div>
        </div>

        <div id="popupShareTable" class="popup">
            <div class="popupBox">
                <h3>Compartir estad√≠sticas</h3>
                <div class="export-buttons">
                    <button id="exportTablePNG" class="btn-orange text-black">Exportar como PNG</button>
                    <button id="exportTablePDF" class="btn-orange text-black">Exportar como PDF</button>
                    <button id="closePopupShareTable" class="btn-delete">Cancelar</button>
                </div>
            </div>
        </div>

        <div id="popupShareGraphics" class="popup">
            <div class="popupBox">
                <h3>Compartir Gr√°fica</h3>
                <div class="export-buttons">
                    <button id="exportGraphicsPNG" class="btn-orange text-black">Exportar como PNG</button>
                    <button id="exportGraphicsPDF" class="btn-orange text-black">Exportar como PDF</button>
                    <button id="closePopupShareGraphics" class="btn-delete">Cancelar</button>
                </div>
            </div>
        </div>

        <div class="buttons-float-container">
            <button id="exportData" class="btn-float" title="Exportar"><i class="fas fa-file-export"></i></button>
            <button id="importData" class="btn-float" title="Importar"><i class="fas fa-file-import"></i></button>
            <button id="theme-toggle" class="btn-float" title="Cambiar Tema"><i class="fas fa-sun"></i></button>
            <input type="file" id="importFile" accept=".json" style="display: none;">
        </div>

        <!-- A√±adir Temporada -->
        <section id="seasons" class="card">
            <h2>‚ûï A√±adir Temporada</h2>

            <form id="formSeason">

                <!-- Bloque: Datos generales -->
                <div class="section">
                    <div class="section-header">üìå Datos generales</div>
                    <div class="section-content open">
                        <input type="number" placeholder="Temporada" id="season" required>
                        <input type="number" placeholder="Partidas Jugadas" id="played" required>
                        <input type="number" placeholder="Victorias" id="wins" required>
                    </div>
                </div>

                <!-- Bloque: Combate -->
                <div class="section">
                    <div class="section-header">‚öîÔ∏è Combate</div>
                    <div class="section-content">
                        <input type="number" placeholder="Eliminaciones" id="kills">
                        <input type="number" placeholder="Asistencias" id="assists">
                        <input type="number" placeholder="Muertes" id="deaths">
                    </div>
                </div>

                <!-- Bloque: Curaci√≥n / Da√±o -->
                <div class="section">
                    <div class="section-header">üíö Curaci√≥n / Da√±o</div>
                    <div class="section-content">
                        <input type="number" placeholder="Curaci√≥n Total" id="healing">
                        <input type="number" placeholder="Da√±o Total" id="damage">
                    </div>
                </div>

                <!-- Bloque: Tiempos -->
                <div class="section">
                    <div class="section-header">‚è±Ô∏è Tiempos</div>
                    <div class="section-content" style="flex-direction: column;">
                        <label>Tiempo en objetivo</label>
                        <div class="time-row">
                            <input type="number" placeholder="Cantidad" id="timeOnObj">
                            <select id="timeOnObjUnit">
                                <option value="h">Horas</option>
                                <option value="m">Minutos</option>
                                <option value="s">Segundos</option>
                            </select>
                        </div>

                        <label>Tiempo total jugado</label>
                        <div class="time-row">
                            <input type="number" placeholder="Cantidad" id="totalTime">
                            <select id="totalTimeUnit">
                                <option value="h">Horas</option>
                                <option value="m">Minutos</option>
                                <option value="s">Segundos</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-buttons">
                    <button type="button" id="deleteBtn" class="btn-delete"
                        style="display: none; width: 100%; margin-top: 10px; padding: 12px 20px; font-size: 1.1rem; border-radius: 10px; transition: 0.3s;">Eliminar
                        Temporada</button>
                    <button type="submit" id="saveBtn" class="btn-primary text-black"
                        style="width: 100%; margin-top: 10px; padding: 12px 20px; font-size: 1.1rem; border-radius: 10px; transition: 0.3s;">Agregar
                        Temporada</button>
                </div>
            </form>
            <button class="btn-secondary" id="tutorial">
                ¬øNo sabes de d√≥nde sacar esta informaci√≥n? Haz clic aqu√≠ y te lo explico.
            </button>

            <div id="tutorialContent" style="display: none; margin-top: 10px;">
                <ul>
                    <li><strong>Paso 1:</strong> En el inicio del juego, dir√≠gete a la parte superior derecha y abre el
                        men√∫ (o presiona <strong>ESC</strong>).</li>
                    <li><strong>Paso 2:</strong> Dentro del men√∫, selecciona <em>"Perfil de carrera"</em>.</li>
                    <li><strong>Paso 3:</strong> Luego, selecciona la opci√≥n <em>"Estad√≠sticas"</em> en la parte
                        superior.</li>
                    <li>All√≠ podr√°s ver todas las estad√≠sticas que pide la web, y tambi√©n filtrar por h√©roe, modo de
                        juego o temporada.</li>
                </ul>
            </div>
        </section>

        <!-- Gr√°ficos -->
        <section id="graphics" class="card">
            <h2>üìä Gr√°ficos</h2>

            <label for="chartSelector"><strong>Ver indicador:</strong></label>
            <select id="chartSelector">
                <option value="winrate">WinRate</option>
                <option value="kda">KDA</option>
                <option value="hpm">HPM (Healing Per Minute)</option>
                <option value="dpm">DPM (Damage Per Minute)</option>
            </select>

            <div id="chartsContainer">
                <canvas id="chartCanvas"></canvas>
            </div>
            <button id="shareGraphics" class="btn-primary text-black">Compartir</button>
        </section>

        <!-- Estad√≠sticas por Temporada -->
        <section id="stats" class="card">
            <h2>üìä Estad√≠sticas por Temporada</h2>
            <p id="noSeasons">A√∫n no hay temporadas a√±adidas.</p>
            <div id="stats-containers">
                <div class="table-mode-switch">
                    <button id="modeSimple" class="active">Modo simple</button>
                    <button id="modeAdvanced">Modo avanzado</button>
                </div>

                <table id="statsTable">
                    <thead>
                        <tr>
                            <th>Editar</th>
                            <th>Temporada</th>
                            <th>KDA</th>
                            <th>Win Rate (%)</th>
                            <th class="col-adv">HPM</th>
                            <th class="col-adv">DPM</th>
                            <th class="col-adv">Curaci√≥n/Da√±o</th>
                            <th class="col-adv">Impacto</th>
                            <th>Objetivo (%)</th>
                        </tr>
                    </thead>

                    <tbody id="statsBody">
                        <!-- tu contenido din√°mico va aqu√≠ -->
                    </tbody>
                </table>
                <p class="simple-note">
                    <strong>Nota:</strong>
                    La fila con <span class="green">fondo verde</span> es tu <strong>mejor temporada</strong> y la fila
                    con
                    <span class="red">fondo rojo</span> es tu <strong>peor temporada</strong>.
                    El <span class="green">borde verde</span> marca la mejor WinRate y el <span class="red">borde
                        rojo</span> marca la peor
                    WinRate.
                </p>
                <button id="shareTable" class="btn-primary text-black">Compartir</button>
            </div>
        </section>

        <!-- Resumen -->
        <section class="card" id="summary">
            <h2>Resumen</h2>
            <p>A√∫n no hay temporadas a√±adidas.</p>
        </section>

        <!-- Comparaci√≥n con temporadas anteriores -->
        <section class="card" id="comparison">
            <h2>üìà Comparaci√≥n con temporadas anteriores</h2>
            <div id="comparisonText">A√∫n no hay suficientes datos para comparar.</div>
        </section>

        <!-- ¬øQu√© significa cada estad√≠stica? -->
        <section id="help" class="card">
            <h2>üìò ¬øQu√© significa cada estad√≠stica?</h2>

            <table class="stats-table" border="1" cellpadding="8" cellspacing="0">
                <thead>
                    <tr>
                        <th>Estad√≠stica</th>
                        <th>F√≥rmula / Descripci√≥n</th>
                        <th>Interpretaci√≥n</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>KDA</strong></td>
                        <td>(Kills + Assists) / Deaths (Eliminaciones y Asistencias por Muerte)</td>
                        <td>Un valor <span class="green">alto es bueno</span></td>
                    </tr>
                    <tr>
                        <td><strong>Win Rate</strong></td>
                        <td>(Victorias / Partidas Jugadas) √ó 100 (Porcentaje de Victorias)</td>
                        <td>Cuanto <span class="green">m√°s alto, mejor</span></td>
                    </tr>
                    <tr>
                        <td><strong>HPM</strong></td>
                        <td>Curaci√≥n por minuto</td>
                        <td>Un valor <span class="green">alto es muy bueno</span> para supports</td>
                    </tr>
                    <tr>
                        <td><strong>DPM</strong></td>
                        <td>Da√±o por minuto</td>
                        <td><span class="green">Alto es bueno</span>, depende del h√©roe</td>
                    </tr>
                    <tr>
                        <td><strong>Curaci√≥n/Da√±o</strong></td>
                        <td>Relaci√≥n entre curaci√≥n y da√±o</td>
                        <td><span class="orange">M√°s alto = m√°s orientado a curar; m√°s bajo = m√°s orientado al
                                da√±o</span>
                        </td>
                    </tr>
                    <tr>
                        <td><strong>Impacto</strong></td>
                        <td>(Curaci√≥n/1000 + Asistencias) / Muertes (Curacion y Asistencias por Muerte)</td>
                        <td>Un <span class="green">valor alto</span> indica excelente presencia sin morir</td>
                    </tr>
                    <tr>
                        <td rowspan="2"><strong>Objetivo (%)</strong></td>
                        <td>Tiempo en objetivo respecto del total</td>

                        <td>
                            <ul>
                                <li><strong>Backline</strong> (Ana, Mercy, Baptiste, Illari): % medio o bajo es normal.
                                    Muy
                                    alto = <span class="red">demasiado adelante</span></li>
                                <li><strong>Melee / Objetivo</strong> (Lucio, Brig): % alto es correcto. Muy bajo =
                                    <span class="red">demasiado lejos del punto</span>
                                </li>
                            </ul>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>
    </main>

    <footer>
        <p>Overwatch 2 Support Stats ‚Ä¢ Creado por <a href="https://lucaasbre.github.io" target="_blank" style="color: #0052CC;">@Lucaasbre</a>
        </p>
    </footer>

    <script src="script.js"></script>
</body>

</html>
